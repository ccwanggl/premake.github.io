<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Premake RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Premake Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Premake" href="/opensearch.xml">
<script src="/js/localizeLastUpdatedDate.js" async defer="defer"></script><title data-react-helmet="true">Generating Project Files | Premake</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://premake.github.io//docs/Generating-Project-Files"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Generating Project Files | Premake"><meta data-react-helmet="true" name="description" content="Now let&#x27;s extend our new action to actually output some workspace and project files so we can begin to get a sense for how things work."><meta data-react-helmet="true" property="og:description" content="Now let&#x27;s extend our new action to actually output some workspace and project files so we can begin to get a sense for how things work."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://premake.github.io//docs/Generating-Project-Files"><link data-react-helmet="true" rel="alternate" href="https://premake.github.io//docs/Generating-Project-Files" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://premake.github.io//docs/Generating-Project-Files" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BZ59R9HF86-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.cceafc8d.css">
<link rel="preload" href="/assets/js/runtime~main.ec1b8233.js" as="script">
<link rel="preload" href="/assets/js/main.209239ff.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/premake-logo.png" alt="Premake Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/premake-logo.png" alt="Premake Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Premake</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">News</a><a class="navbar__item navbar__link" href="/community/support">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://twitter.com/premakeapp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa fa-twitter fa-2x" aria-label="Premake on Twitter"></a><a href="https://github.com/premake/premake-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa fa-github fa-2x" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Generating Project Files</h1></header><p>Now let&#x27;s extend our new action to actually output some workspace and project files so we can begin to get a sense for how things work.</p><p>First we need to know what we want to generate. Let&#x27;s start with a very simple Premake project script, then we&#x27;ll figure out how we want it to appear when we translate it to Lua.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workspace &quot;Greetings&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    configurations { &quot;Debug&quot;, &quot;Release&quot; }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project &quot;HelloApp&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind &quot;ConsoleApp&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    language &quot;C++&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    files { &quot;hello.h&quot;, &quot;hello.cpp&quot; }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There are, of course, many ways we could express this in Lua. For the purposes of this tutorial, we&#x27;ll start by creating two files, starting with <code>Greetings.wks.lua</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workspace = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;Greetings&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    projects = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&quot;HelloApp&quot;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            path = &quot;HelloApp.prj.lua&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Workspaces generally are used to manage a list of projects, so we&#x27;ll try to do the same with our Lua version.</p><p>We&#x27;ll also generate a second file named <code>HelloApp.prj.lua</code>, containing some of the easily accessible project information.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">project = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;MyConsoleApp&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uuid = &quot;B19F86AA-524E-4260-B200-243C70F2DA04&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind = &quot;ConsoleApp&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    language = &quot;C++&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is just to get things started; we&#x27;ll come back to the configurations and the source code files and all of the other settings later.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="creating-the-files">Creating the Files<a aria-hidden="true" class="hash-link" href="#creating-the-files" title="Direct link to heading">â€‹</a></h2><p>Creating these files is easy: Premake has a built-in function to do just that, which we can leverage in our action&#x27;s <code>onWorkspace()</code> and <code>onProject()</code> callbacks.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- lua/lua.lua</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">premake.modules.lua = {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local m = premake.modules.lua</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local p = premake</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newaction {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    trigger = &quot;lua&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    description = &quot;Export project information as Lua&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onStart = function ()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -- create a new file with a &quot;.wks.lua&quot; extension and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -- then call our generateWorkspace() function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onWorkspace = function(wks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.generate(wks, &quot;.wks.lua&quot;, m.generateWorkspace)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -- create a new file with a &quot;.prj.lua&quot; extension and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -- then call our generateProject() function.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onProject = function(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.generate(prj, &quot;.prj.lua&quot;, m.generateProject)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateWorkspace(wks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;This is a Lua &quot;workspace&quot; file.&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateProject(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;This is a Lua &quot;project&quot; file.&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return m</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>premake.generate()</code> function uses the information contained in the workspace or project to figure out the right name of location for the file, and then creates it on the disk. Once the file has been successfully created and opened, it then calls the function we provide as the last argument in the call (<code>generateWorkspace()</code> and <code>generateProject()</code> respectively) and passes it the corresponding workspace or project object to be exported.</p><p>The <code>p.w()</code> function, which stands for &quot;Premake write&quot;, simply outputs a text string to the currently open file. You&#x27;ll be seeing much more of this one.</p><p>If you go ahead and generate that project (i.e. run <code>premake5 lua</code> again), you will see the files get created on disk, each containing the corresponding &quot;This is a...&quot; message.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="populating-the-workspace">Populating the Workspace<a aria-hidden="true" class="hash-link" href="#populating-the-workspace" title="Direct link to heading">â€‹</a></h2><p>Now we can begin to fill in our workspace and project files. Let&#x27;s begin with the easy parts of the workspace.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateWorkspace(wks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;workspace = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;name = &quot;%s&quot;,&#x27;, wks.name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;projects = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;},&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;}&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A couple of new functions here: <code>p.push()</code> writes the provided string to the output file, and increments an internal indentation level. <code>p.pop()</code> decrements the indentation level, and then writes its provided string to the output. <code>p.w()</code>, which we saw earlier, outputs its string at the current indentation level as set by <code>push()</code> and <code>pop()</code>.</p><p>So between all that pushing and popping, we end up with a nicely indented workspace file with an empty list of projects.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workspace = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;Greetings&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    projects = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s tackle that project list next. Premake has an entire API for working with workspaces, which you can find by browsing the <a href="https://github.com/premake/premake-core/blob/master/src/base/workspace.lua" target="_blank" rel="noopener noreferrer">src/base/workspace.lua</a> script in Premake&#x27;s source code.</p><p><em>(Coming soon, just need to make a few code changes...)</em></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="populating-the-project">Populating the Project<a aria-hidden="true" class="hash-link" href="#populating-the-project" title="Direct link to heading">â€‹</a></h2><p>Since we&#x27;re only exporting a few of the simple fields, generating our project file is quite easy:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateProject(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;project = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;name = &quot;%s&quot;,&#x27;, prj.name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;uuid = &quot;%s&quot;,&#x27;, prj.uuid)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;kind = &quot;%s&quot;&#x27;, prj.kind)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;}&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Which gives us a project file like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">project = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;MyConsoleApp&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    uuid = &quot;B19F86AA-524E-4260-B200-243C70F2DA04&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind = &quot;ConsoleApp&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    language = &quot;C++&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="escapes-and-indents-and-eols">Escapes and Indents and EOLs<a aria-hidden="true" class="hash-link" href="#escapes-and-indents-and-eols" title="Direct link to heading">â€‹</a></h2><p>For the sake of completeness, a few last points.</p><p>First, indentation. By default, Premake will uses tab characters to indent the output. If your target format uses a different character sequence, two spaces for instances, you can adjust that using Premake&#x27;s <code>p.indent()</code> function.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">p.indent(&quot;  &quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Similarly, Premake will output Unix-style &quot;\n&quot; line endings by default, which can be changed with the <code>p.eol()</code> function.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">p.eol(&quot;\r\n&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you wish to change these values for both your generated workspaces and projects, you can place them in your action&#x27;s <code>onStart()</code> function. If the values are different between workspaces and projects, put then in <code>onWorkspace()</code> and <code>onProject()</code> instead.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">onStart = function()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.indent(&quot;  &quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.eol(&quot;\r\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, before we go we should consider string escaping. If, for example, someone were to name their project <code>Joe&#x27;s &quot;Lucky&quot; Diner</code>, we would try to generate this Lua script...</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;Joe&#x27;s &quot;Lucky&quot; Diner&quot;,</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>...which would fail to load in a Lua interpreter, since the double quotes aren&#x27;t properly matched. Instead, we ought to be generating:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name = &quot;Joe&#x27;s \&quot;Lucky\&quot; Diner&quot;,</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Premake allows exporters to define an &quot;escaper&quot;, a function which is used to transform values before they are written to the output. For our Lua exporter, we want to escape those double quotes with a backslash, and we should also escape backslashes while we&#x27;re at it, which we can do by adding this function to our module:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.esc(value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    value = value:gsub(&#x27;\\&#x27;, &#x27;\\\\&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    value = value:gsub(&#x27;&quot;&#x27;, &#x27;\\&quot;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can then tell Premake to use this function for both our workspaces and our project by registering our escaper in our action&#x27;s <code>onStart()</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">onStart = function()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.escaper(m.escaper)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>One more step: since we don&#x27;t <em>always</em> want to escape values, Premake provides a separate call <code>p.x()</code> for those times when we do. For our example case, we really only need to worry about the workspace and solution names right now, since the other fields are limited to values which do not contain special characters (while there is no harm in using <code>p.x()</code> on values that do not contain special characters, there is a small performance hit which can add up for large projects).</p><p>So our final script looks like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- lua/lua.lua</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">premake.modules.lua = {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local m = premake.modules.lua</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local p = premake</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newaction {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    trigger = &quot;lua&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    description = &quot;Export project information as Lua&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onStart = function ()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.escaper(m.esc)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onWorkspace = function(wks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.generate(wks, &quot;.wks.lua&quot;, m.generateWorkspace)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    onProject = function(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.generate(prj, &quot;.prj.lua&quot;, m.generateProject)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateWorkspace(wks)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;workspace = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.x(&#x27;name = &quot;%s&quot;,&#x27;, wks.name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;projects = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;},&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;}&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generateProject(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.push(&#x27;project = {&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.x(&#x27;name = &quot;%s&quot;,&#x27;, prj.name)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;uuid = &quot;%s&quot;,&#x27;, prj.uuid)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.w(&#x27;kind = &quot;%s&quot;&#x27;, prj.kind)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.pop(&#x27;}&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.esc(value)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    value = value:gsub(&#x27;\\&#x27;, &#x27;\\\\&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    value = value:gsub(&#x27;&quot;&#x27;, &#x27;\\&quot;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">return m</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/premake/premake-core/edit/master/website/docs/Generating-Project-Files.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-03-17T14:50:56.000Z">3/17/2021</time></b> by <b>starkos</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-the-files" class="table-of-contents__link toc-highlight">Creating the Files</a></li><li><a href="#populating-the-workspace" class="table-of-contents__link toc-highlight">Populating the Workspace</a></li><li><a href="#populating-the-project" class="table-of-contents__link toc-highlight">Populating the Project</a></li><li><a href="#escapes-and-indents-and-eols" class="table-of-contents__link toc-highlight">Escapes and Indents and EOLs</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/What-Is-Premake">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Your-First-Script">Your First Script</a></li><li class="footer__item"><a href="https://github.com/premake/premake-4.x/wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Premake 4.x</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/premake/premake-core/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/premake" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/community/support">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/premake/premake-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/premakeapp" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opencollective.com/premake" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OpenCollective<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Premake</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ec1b8233.js"></script>
<script src="/assets/js/main.209239ff.js"></script>
</body>
</html>