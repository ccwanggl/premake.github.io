<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Premake RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Premake Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Premake" href="/opensearch.xml">
<script src="/js/localizeLastUpdatedDate.js" async defer="defer"></script><title data-react-helmet="true">Overrides &amp; Call Arrays | Premake</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://premake.github.io//docs/Overrides-and-Call-Arrays"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Overrides &amp; Call Arrays | Premake"><meta data-react-helmet="true" name="description" content="Premake&#x27;s extensibility is built around two coding conventions: overrides, a formalized way of replacing one function with another, and call arrays, a way of sequencing a series of steps at runtime."><meta data-react-helmet="true" property="og:description" content="Premake&#x27;s extensibility is built around two coding conventions: overrides, a formalized way of replacing one function with another, and call arrays, a way of sequencing a series of steps at runtime."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://premake.github.io//docs/Overrides-and-Call-Arrays"><link data-react-helmet="true" rel="alternate" href="https://premake.github.io//docs/Overrides-and-Call-Arrays" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://premake.github.io//docs/Overrides-and-Call-Arrays" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BZ59R9HF86-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4a7acc65.css">
<link rel="preload" href="/assets/js/runtime~main.42daa687.js" as="script">
<link rel="preload" href="/assets/js/main.d59908db.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/premake-logo.png" alt="Premake Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/premake-logo.png" alt="Premake Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Premake</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">News</a><a class="navbar__item navbar__link" href="/community/support">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://twitter.com/premakeapp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa fa-twitter fa-2x" aria-label="Premake on Twitter"></a><a href="https://github.com/premake/premake-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa fa-github fa-2x" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Writing Premake Scripts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Extending Premake</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Extending-Premake">Extending Premake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Code-Overview">Code Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Coding-Conventions">Coding Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Overrides-and-Call-Arrays">Overrides &amp; Call Arrays</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Developing-Modules">Developing Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Adding-New-Action">Adding a New Action</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Overrides &amp; Call Arrays</h1></header><p>Premake&#x27;s extensibility is built around two coding conventions: <em>overrides</em>, a formalized way of replacing one function with another, and <em>call arrays</em>, a way of sequencing a series of steps at runtime.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="your-first-customization">Your First Customization<a aria-hidden="true" class="hash-link" href="#your-first-customization" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s jump right in with a simple example. Let&#x27;s say that we&#x27;re planning to keep our Premake-generated Visual Studio projects around for a while and, for historical reference, we&#x27;d like to know which version of Premake was used to generate them. To do so, we would like to add an XML comment to the top of the generated project files, like so:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- Generated by Premake 5.0.0-alpha3 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">Project</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">DefaultTargets</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">Build</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">ToolsVersion</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">4.0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">http://schemas.microsoft.com/developer/msbuild/2003</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">ItemGroup</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">Label</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">ProjectConfigurations</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">&lt;!-- ... and so on... --&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We don&#x27;t want to modify Premake&#x27;s own source code, because then our changes would be overwritten by each new update, and we&#x27;d be stuck maintaining our own fork of the code. It would also mean that everyone who generated our projects would need to have the customized version of Premake, otherwise we&#x27;d end up with generated projects that did not contain our version commment.</p><p>Instead, we&#x27;d really like to implement this customization right in our project scripts. That way we can share the scripts with any developer, and they can then generate a new project that has the version comment in it.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="use-the-source">Use the Source!<a aria-hidden="true" class="hash-link" href="#use-the-source" title="Direct link to heading">â€‹</a></h2><p>Before we can make this change, we first need to know what function in the Premake source code is emitting this particular markup. As described in the <a href="/docs/Code-Overview">Code Overview</a>, the Visual Studio exporter is currently located in the <code>src/actions/vstudio</code> folder in the Premake source tree (go ahead and find it, we&#x27;ll wait!).</p><p>We&#x27;re looking for the code which generates the <code>.vcxproj</code> files, and browsing the file names brings us to <code>vs2010_vcxproj.lua</code>. Opening this file, we can then search for the <code>&quot;&lt;Project&quot;</code> string, which we find in the <code>m.project()</code> function:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    function m.project(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        local action = premake.action.current()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        p.push(&#x27;&lt;Project DefaultTargets=&quot;Build&quot; ToolsVersion=&quot;%s&quot; xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            action.vstudio.toolsVersion)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>(Or, if you are using a tool which supports it, it can be quicker to just run a full text search across the Premake sources for the markup you are looking to override.)</p><p>For the moment we don&#x27;t really need to worry too much about how this code works because we aren&#x27;t actually going to change it at all. Instead, we will <em>override</em> it with a new function that outputs our version comment, and then calls the original function to output the Project element, unmodified.</p><p>Before we can do that, we need one more bit of information: what is <code>m</code>? <a href="/docs/Coding-Conventions">By convention</a>, <code>m</code> is a shortcut for the module&#x27;s namespace (really just a Lua table) which we declare at the top of the file. Looking at the top of <code>vs2010_vcxproj.lua</code> we find:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">local p = premake</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">local m = p.vstudio.vc2010</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Expanding that out, we can deduce that the fully-qualified name of the function we want to override is <code>premake.vstudio.vc2010.project()</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="introducing-overrides">Introducing Overrides<a aria-hidden="true" class="hash-link" href="#introducing-overrides" title="Direct link to heading">â€‹</a></h2><p>Now that we&#x27;ve identified the function that emits the markup we wish to change, we can override it using Premake&#x27;s aptly named <code>override()</code> function.</p><p>Note that actions don&#x27;t get pulled in until they are actually used so you will need to require it in order to access it</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">require(&#x27;vstudio&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then (and only then) you can go ahead and call the override function !</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">premake.override(premake.vstudio.vc2010, &quot;project&quot;, function(base, prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    premake.w(&#x27;&lt;!-- Generated by Premake &#x27; .. _PREMAKE_VERSION .. &#x27; --&gt;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    base(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This snippet replaces the original implementation of <code>m.project()</code> with my new (anonymous) function. From this point on, when someone calls <code>m.project()</code>, Premake will call my new function, passing it the original implementation as the first argument (<code>base</code>). If the function requires any other arguments (in this case, it receives the project being exported as <code>prj</code>) they appear after.</p><p>In our replacement function, we emit our comment header using <code>premake.w()</code>, which is short for &quot;premake write&quot;, and <a href="/docs/_PREMAKE_VERSION">_PREMAKE_VERSION</a>, which is a global variable holding the version of the currently running Premake executable.</p><p>After emitting the comment we call <code>base(prj)</code>, the original implementation of <code>m.project()</code>, to do the rest of the work for us. Easy!</p><p>To enable our override, place that code anywhere in your project or system scripts. Perhaps something like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workspace &quot;MyWorkspace&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   configurations { &quot;Debug&quot;, &quot;Release&quot; }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project &quot;MyProject&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   kind &quot;ConsoleApp&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   -- ... the rest of the project settings...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-- Write the current Premake version into our generated files, for reference</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">premake.override(premake.vstudio.vc2010, &quot;project&quot;, function(base, prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    premake.w(&#x27;&lt;!-- Generated by Premake &#x27; .. _PREMAKE_VERSION .. &#x27; --&gt;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    base(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The next time you generate a Visual Studio project from your scripts, the comment header will be placed before the Project element.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="introducing-call-arrays">Introducing Call Arrays<a aria-hidden="true" class="hash-link" href="#introducing-call-arrays" title="Direct link to heading">â€‹</a></h2><p>Overrides are a great way to intercept an existing call to modify its arguments or return value or even replace it entirely. There is another, more self-contained way that we could have implemented our customization by leveraging <a href="/docs/Coding-Conventions">Premake&#x27;s <em>call array</em> convention</a>.</p><p>If you look at the top of <code>vs2010_vcxproj.lua</code>, you will see that <code>m.project()</code> is called via an array of function references:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">m.elements.project = function(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.xmlDeclaration,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.project,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.projectConfigurations,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.globals,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.importDefaultProps,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.configurationPropertiesGroup,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.importExtensionSettings,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.propertySheetGroup,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.userMacros,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.outputPropertiesGroup,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.itemDefinitionGroups,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.assemblyReferences,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.files,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.projectReferences,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        m.importExtensionTargets,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function m.generate(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    io.utf8()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.callArray(m.elements.project, prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p.out(&#x27;&lt;/Project&gt;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Premake calls <code>m.generate()</code> to export the projectâ€”we&#x27;ll talk about how that happens later. <code>m.generate()</code> calls <code>p.callArray()</code> (remember <a href="/docs/Coding-Conventions"><code>p</code> is an alias for <code>premake</code></a>), which calls all of the functions in the list returned by <code>m.elements.project()</code>, passing the provided arguments (in this case <code>prj</code>) to each of them. This indirection allows project script authors like yourself an opportunity to modify that list of calls by adding, removing, or reordering the list.</p><p>Let&#x27;s implement our version comment as an addition to this particular call array. To do so, we will override the <code>m.elements.project()</code> function (remember from the earlier example that <code>m</code> is short for <code>premake.vstudio.vc2010</code>). We&#x27;ll call the original implementation to get the array of calls, and then add our own before returning it to <code>m.generate()</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI lua"><pre tabindex="0" class="prism-code language-lua codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">local function premakeVersionComment(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    premake.w(&#x27;&lt;!-- Generated by Premake &#x27; .. _PREMAKE_VERSION .. &#x27; --&gt;&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">premake.override(premake.vstudio.vc2010.elements, &quot;project&quot;, function(base, prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    local calls = base(prj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    table.insertafter(calls, m.xmlDeclaration, premakeVersionComment)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return calls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you add that snippet to your project or system script, your new function will get called between <code>m.xmlDeclaration()</code> and <code>m.project()</code> and place our comment right where we&#x27;d like it.</p><p><em>(Wondering <a href="/docs/Why-Do-Call-Arrays-Need-Functions">why the call array is in a function and not just a global table</a>? Hint: because otherwise overrides wouldn&#x27;t work.)</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/premake/premake-core/edit/master/website/docs/Overrides-and-Call-Arrays.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-09-08T19:42:18.000Z">9/8/2021</time></b> by <b>KyrietS</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Coding-Conventions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Coding Conventions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Developing-Modules"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Developing Modules<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#your-first-customization" class="table-of-contents__link toc-highlight">Your First Customization</a></li><li><a href="#use-the-source" class="table-of-contents__link toc-highlight">Use the Source!</a></li><li><a href="#introducing-overrides" class="table-of-contents__link toc-highlight">Introducing Overrides</a></li><li><a href="#introducing-call-arrays" class="table-of-contents__link toc-highlight">Introducing Call Arrays</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/What-Is-Premake">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Your-First-Script">Your First Script</a></li><li class="footer__item"><a href="https://github.com/premake/premake-4.x/wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">Premake 4.x</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/premake/premake-core/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/premake" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/community/support">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/premake/premake-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/premakeapp" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opencollective.com/premake" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OpenCollective<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Premake</div></div></div></footer></div>
<script src="/assets/js/runtime~main.42daa687.js"></script>
<script src="/assets/js/main.d59908db.js"></script>
</body>
</html>