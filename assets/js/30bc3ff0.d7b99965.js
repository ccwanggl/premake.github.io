"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2118],{64163:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var i=n(74848),r=n(28453);const o={},a=void 0,s={id:"gitintegration",title:"gitintegration",description:"Enable git integration to run premake on checkout.",source:"@site/docs/gitintegration.md",sourceDirName:".",slug:"/gitintegration",permalink:"/docs/gitintegration",draft:!1,unlisted:!1,editUrl:"https://github.com/premake/premake-core/edit/master/website/docs/gitintegration.md",tags:[],version:"current",lastUpdatedBy:"Joris Dauphin",lastUpdatedAt:1726089148e3,frontMatter:{},sidebar:"docs",previous:{title:"xcodesystemcapabilities",permalink:"/docs/xcodesystemcapabilities"},next:{title:"_ACTION",permalink:"/docs/globals/_ACTION"}},l={},c=[{value:"Parameters",id:"parameters",level:3},{value:"Applies To",id:"applies-to",level:3},{value:"Availability",id:"availability",level:3},{value:"Examples",id:"examples",level:3}];function d(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Enable git integration to run premake on checkout."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-lua",children:'gitintegration ("value")\n'})}),"\n",(0,i.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Action"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Off"}),(0,i.jsx)(t.td,{children:"Disable git integration."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Always"}),(0,i.jsx)(t.td,{children:"Run premake on checkout."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"OnNewFiles"}),(0,i.jsx)(t.td,{children:"Run premake only when files are added/removed or if premake script has changed."})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"applies-to",children:"Applies To"}),"\n",(0,i.jsx)(t.p,{children:"Global scope."}),"\n",(0,i.jsx)(t.h3,{id:"availability",children:"Availability"}),"\n",(0,i.jsx)(t.p,{children:"Premake 5.0.0 beta 3 or later."}),"\n",(0,i.jsx)(t.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(t.p,{children:"Regenerate autoversion.h with git tag when checkout to another branch."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-lua",children:'gitintegration "Always"\n\nlocal locationDir = _OPTIONS["to"]\n\nlocal function autoversion_h()\n\tlocal git_tag, errorCode = os.outputof("git describe --tag --always")\n\tif errorCode == 0 then\n\t\tprint("git description: ", git_tag)\n\t\tlocal content = io.readfile("src/autoversion.h.in")\n\t\tcontent = content:gsub("${GIT_DESC}", git_tag)\n\n\t\tos.mkdir(locationDir)\n\t\tlocal f, err = os.writefile_ifnotequal(content, path.join(locationDir, "autoversion.h"))\n\n\t\tif (f == 0) then -- file not modified\n\t\telseif (f < 0) then\n\t\t\terror(err, 0)\n\t\t\treturn false\n\t\telseif (f > 0) then\n\t\t\tprint("Generated autoversion.h...")\n\t\tend\n\n\t\treturn true\n\telse\n\t\tprint("`git describe --tag` failed with error code", errorCode, git_tag)\n\t\treturn false\n\tend\nend\n\nlocal have_autoversion_h = autoversion_h()\n\nworkspace "MyProject"\n\tlocation(locationDir)\n\n\tif have_autoversion_h then\n\t\tincludedirs { locationDir } -- for generated file (autoversion.h)\n\tend\n  -- [..]\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var i=n(96540);const r={},o=i.createContext(r);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);