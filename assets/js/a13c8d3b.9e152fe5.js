"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[644],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(96540);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},76315:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var s=i(74848),l=i(28453);const r={},t=void 0,a={id:"filter",title:"filter",description:"Limits the subsequent build settings to a particular environment.",source:"@site/docs/filter.md",sourceDirName:".",slug:"/filter",permalink:"/docs/filter",draft:!1,unlisted:!1,editUrl:"https://github.com/premake/premake-core/edit/master/website/docs/filter.md",tags:[],version:"current",lastUpdatedBy:"Joao Matos",lastUpdatedAt:1727531119e3,frontMatter:{},sidebar:"docs",previous:{title:"files",permalink:"/docs/files"},next:{title:"flags",permalink:"/docs/flags"}},o={},d=[{value:"Parameters",id:"parameters",level:3},{value:"Availability",id:"availability",level:3},{value:"Examples",id:"examples",level:3},{value:"Clarifying Notes",id:"clarifying-notes",level:3},{value:"See Also",id:"see-also",level:3}];function c(e){const n={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Limits the subsequent build settings to a particular environment."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter { "prefix:keywords" }\n'})}),"\n",(0,s.jsx)(n.p,{children:"Any settings that appear after this function in the script will be applied only to those contexts that match all of the listed keywords. See below for some usage examples."}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"keywords"})," is a list of identifiers, prefixed by the field against which they should be tested. When all of the keywords in this list match the current context, the settings that follow the ",(0,s.jsx)(n.code,{children:"filter"})," statement will be applied. If any of the keywords fail this test, the settings are ignored. Keywords may contain wildcards, and are not case-sensitive. See below for examples."]}),"\n",(0,s.jsx)(n.p,{children:"Each keyword must include a prefix to specify which field should be tested. The following field prefixes are currently supported:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/globals/_ACTION",children:"action"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/architecture",children:"architecture"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/configurations",children:"configurations"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/files",children:"files"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/kind",children:"kind"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/language",children:"language"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/globals/_OPTIONS",children:"options"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/platforms",children:"platforms"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/system",children:"system"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/toolset",children:"toolset"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Keywords may use the ",(0,s.jsx)(n.code,{children:"\\*"})," and ",(0,s.jsx)(n.code,{children:"\\*\\*"})," wildcards to match more than one term or file. You may also use the modifiers ",(0,s.jsx)(n.code,{children:"not"})," and ",(0,s.jsx)(n.code,{children:"or"})," to build more complex conditions. Again, see the examples below for more information."]}),"\n",(0,s.jsx)(n.h3,{id:"availability",children:"Availability"}),"\n",(0,s.jsx)(n.p,{children:"Premake 5.0 or later."}),"\n",(0,s.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.p,{children:"Define a new symbol which applies only to debug builds."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'workspace "MyWorkspace"\n  configurations { "Debug", "Release" }\n\nfilter "configurations:Debug"\n  defines { "_DEBUG" }\n'})}),"\n",(0,s.jsx)(n.p,{children:'If no field prefix is specified in the keyword, "configurations" is used as a default.'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "Debug"\n  defines { "_DEBUG" }\n'})}),"\n",(0,s.jsx)(n.p,{children:"Define a symbol only when targeting Visual Studio 2010."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "action:vs2010"\n  defines { "VISUAL_STUDIO_2005" }\n'})}),"\n",(0,s.jsx)(n.p,{children:"Wildcards can be used to match multiple terms. Define a symbol for all versions of Visual Studio."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "action:vs*"\n  defines { "VISUAL_STUDIO" }\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"or"})," modifier may be used when several values are possible. Define a value just for library targets."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "kind:SharedLib or StaticLib"\n  defines { "LIBRARY_TARGET" }\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When multiple keywords are listed, an implicit ",(0,s.jsx)(n.strong,{children:"and"})," is assumed between them. Define compiler options only when using GNU Make and GCC."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter { "action:gmake*", "toolset:gcc" }\n  buildoptions {\n    "-Wall", "-Wextra", "-Werror"\n  }\n'})}),"\n",(0,s.jsx)(n.p,{children:"If any keyword pattern fails to match the current context, the entire filter is skipped over. Lua's curly bracket list syntax must be used when multiple keywords are present."}),"\n",(0,s.jsx)(n.p,{children:"Add a suffix to the debug versions of libraries."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- (configurations == "Debug") and (kind == SharedLib or kind == "StaticLib")\nfilter { "Debug", "kind:SharedLib or StaticLib" }\n  targetsuffix "_d"\n\n-- Could also be written as\nfilter { "Debug", "kind:*Lib" }\n  targetsuffix "_d"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Apply settings based on the presence of a ",(0,s.jsx)(n.a,{href:"/docs/Command-Line-Arguments",children:"custom command line option"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Using an option like --localized\nfilter "options:localized"\n  files { "src/localizations/**" }\n\n-- Using an option like --renderer=opengl\nfilter "options:renderer=opengl"\n  files { "src/opengl/**.cpp" }\n'})}),"\n",(0,s.jsx)(n.p,{children:"Although support is currently limited, you may also apply settings to a particular file or set of files. This example sets the build action for all PNG image files."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "files:*.png"\n  buildaction "Embed"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In the case of files you may also use the ",(0,s.jsx)(n.strong,{children:"**"})," wildcard, which will recurse into subdirectories."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "files:**.png"\n  buildaction "Embed"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can also use ",(0,s.jsx)(n.strong,{children:"not"})," to apply the settings to all environments where the identifier is not set."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "system:not windows"\n  defines { "NOT_WINDOWS" }\n'})}),"\n",(0,s.jsx)(n.p,{children:"You can combine different prefixes within a single keyword."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'filter "system:windows or language:C#"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Finally, you can reset the filter and remove all active keywords by passing the function an empty table."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:"filter {}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"clarifying-notes",children:"Clarifying Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"When a filter is set, any previous filter operations will become inactive.  In other words, initiating a filter acts as though a reset occurred first, followed by setting a new filter condition."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Filters can be viewed as a scoping concept.  A currently set filter goes 'out of scope' when either a filter reset operation is invoked or a project definition is started."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/Filters",children:"Filters"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);